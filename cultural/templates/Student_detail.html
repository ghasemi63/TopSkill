{% extends 'base_generic.html' %}
{% load static %}
{% block script %}{% endblock script %}
{% block title %}پرونده {{ request.user.first_name }} {{ request.user.last_name }}{% endblock title %}
{% block content %}
    <div class="card card-success">
        <div class="card-header">
            <h3 class="card-title text-center">پرونده دانشجو</h3>
        </div>
        <div class="card card-warning">
            <div class="card-header ">
                <div class="container">
                    <div class="row">
                        <div class="col border">
                            <div class="row p-2">
                                <label for="name">نام و نام خانوادگی:</label>
                                <h6>{{ detail.firstname }} {{ detail.lastname }}</h6>
                            </div>
                        </div>
                        <div class="col border">
                            <div class="row p-2">
                                <label for="fathername">فرزند:</label>
                                <h6>{{ detail.fathername }}</h6>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="container text-center">
                    <div class="row">
                        <div class="col border ">
                            <div class="row p-2">
                                <label for="name">شماره ملی:</label>
                                <h6>{{ detail.nationalcode }}</h6>
                            </div>
                        </div>
                        <div class="col border">
                            <div class="row p-2">
                                <label for="fathername">شماره دانشجویی:</label>
                                <h6>{{ detail.studentnumber }}</h6>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="container text-center">
                    <div class="row">
                        <div class="col border">
                            <div class="row p-2">
                                <label for="name">مقطع تحصیلی:</label>
                                <h6>{{ detail.substudy_level_title }}</h6>
                            </div>
                        </div>
                        <div class="col border">
                            <div class="row p-2">
                                <label for="fathername">رشته تحصیلی:</label>
                                <h6>{{ detail.course_study_title }}</h6>
                            </div>
                        </div>
                        <div class="col border">
                            <div class="row">
                                <label for="name">واحد استان:</label>
                                <h6>{{ detail.center_province_title }}</h6>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="container text-center">
                    <div class="row">
                        <div class="col border">
                            <div class="row p-2">
                                <label for="fathername">مرکز آموزش:</label>
                                <h6>{{ detail.center_title }}</h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <table class="table table-striped table-bordered col-md-auto text-center table-hover"
                   style="width:100%">
                <thead>
                <tr>
                    <th>مجموع امتیاز استان</th>
                    <th>مجموع امتیاز داوری مرحله اول</th>
                    <th>مجموع امتیاز داوری مرحله دوم</th>
                    <th>مجموع امتیاز داوری مرحله نهایی</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <th>{{ detail.province_score|floatformat:2 }}</th>
                    <th>{{ detail.judges1|floatformat:2 }}</th>
                    <th>{{ detail.judges2|floatformat:2 }}</th>
                    <th>{{ detail.judges3|floatformat:2 }}</th>
                </tr>
                </tbody>
            </table>
        </div>
           <div class="text-left">
                <a href="{% url 'TopSkill:students' %}">
                <button type="button" class="btn btn-success col-2">بازگشت</button>
            </a>
           </div>
        <div class="card-body">
            <ul class="nav nav-tabs">
                <li class="nav-item"><a class="nav-link " data-toggle="tab" href="#education">آموزشی</a></li>
                <li class="nav-item"><a class="nav-link " data-toggle="tab" href="#research">پژوهشی</a></li>
                <li class="nav-item"><a class="nav-link " data-toggle="tab" href="#Skill">مهارتی</a></li>
                <li class="nav-item"><a class="nav-link " data-toggle="tab" href="#cultural">فرهنگی</a></li>
                <li class="nav-item"><a class="nav-link " data-toggle="tab" href="#additional">امتیاز افزوده</a></li>
            </ul>
            <div class="tab-content">
                <div id="education" class="tab-pane fade">
                    <div class="card-header text-center">
                        <h3 class="card-title">مستندات مربوط به عناوین آموزشی دانشجو </h3>
                    </div>
                    <div class="card-body">
                        <table id="table3" class="table table-striped table-bordered col-md-auto text-center table-hover">
                            <thead>
                            <tr>
                                <th>عنوان</th>
                                <th>استان</th>
                                <th>داوری مرحله اول</th>
                                <th>داوری مرحله دوم</th>
                                <th>داوری مرحله سوم</th>
                                <th>گواهی</th>
                            </tr>
                            </thead>
                            <tbody class="text-xs">{% for x in level %}{% if x.leveling_index_category_id == 1 %}
                                <tr>
                                    <td>{{ x.title }}</td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.province_score|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge1|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge2|floatformat:2}}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge3|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td>
                                        <a href="{% url 'TopSkill:document_score' detail.id x.id %}">
                                            <button type="button" class="btn btn-info">مدارک</button>
                                        </a>
                                    </td>
                                </tr>{% endif %}{% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="research" class="tab-pane fade">
                    <div class="card-header text-center">
                        <h3 class="card-title">مستندات مربوط به عناوین پژوهشی دانشجو </h3>
                    </div>
                    <div class="card-body">
                        <table id="table2" class="table table-striped table-bordered col-md-auto text-center table-hover">
                            <thead>
                            <tr>
                                <th>عنوان</th>
                                <th>استان</th>
                                <th>داوری مرحله اول</th>
                                <th>داوری مرحله دوم</th>
                                <th>داوری مرحله سوم</th>
                                <th>گواهی</th>
                            </tr>
                            </thead>
                            <tbody class="text-xs">{% for x in level %}{% if x.leveling_index_category_id == 2 %}
                                <tr>
                                    <td>{{ x.title }}</td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.province_score|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge1|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge2|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge3|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td>
                                        <a href="{% url 'TopSkill:document_score' detail.id x.id %}">
                                            <button type="button" class="btn btn-info">مدارک</button>
                                        </a>
                                    </td>
                                </tr>{% endif %}{% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="Skill" class="tab-pane fade">
                    <div class="card-header text-center">
                        <h3 class="card-title">مستندات مربوط به عناوین مهارتی دانشجو </h3>
                    </div>
                    <div class="card-body">
                        <table id="table3" class="table table-striped table-bordered col-md-auto text-center table-hover">
                            <thead>
                            <tr>
                                <th>عنوان</th>
                                <th>استان</th>
                                <th>داوری مرحله اول</th>
                                <th>داوری مرحله دوم</th>
                                <th>داوری مرحله سوم</th>
                                <th>گواهی</th>
                            </tr>
                            </thead>
                            <tbody class="text-xs">{% for x in level %}{% if x.leveling_index_category_id == 3 %}
                                <tr>
                                    <td>{{ x.title }}</td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.province_score|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge1|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge2|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge3|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><a href="{% url 'TopSkill:document_score' detail.id x.id %}">
                                        <button type="button" class="btn btn-info">مدارک</button>
                                    </a></td>
                                </tr>{% endif %}{% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="cultural" class="tab-pane fade">
                    <div class="card-header text-center">
                        <h3 class="card-title">مستندات مربوط به عناوین فرهنگی دانشجو </h3>
                    </div>
                    <div class="card-body">
                        <table id="table3" class="table table-striped table-bordered col-md-auto text-center table-hover">
                            <thead>
                            <tr>
                                <th>عنوان</th>
                                <th>استان</th>
                                <th>داوری مرحله اول</th>
                                <th>داوری مرحله دوم</th>
                                <th>داوری مرحله سوم</th>
                                <th>گواهی</th>
                            </tr>
                            </thead>
                            <tbody class="text-xs">{% for x in level %}{% if x.leveling_index_category_id == 4 %}
                                <tr>
                                    <td>{{ x.title }}</td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.province_score|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge1|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge2|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge3|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td>
                                        <a href="{% url 'TopSkill:document_score' detail.id x.id %}">
                                            <button type="button" class="btn btn-info">مدارک</button>
                                        </a>
                                    </td>
                                </tr>{% endif %}{% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="additional" class="tab-pane fade">
                    <div class="card-header text-center">
                        <h3 class="card-title">مستندات مربوط به امتیاز افزوده </h3>
                    </div>
                    <div class="card-body">
                        <table id="table3" class="table table-striped table-bordered col-md-auto text-center table-hover">
                            <thead>
                            <tr>
                                <th>عنوان</th>
                                <th>استان</th>
                                <th>داوری مرحله اول</th>
                                <th>داوری مرحله دوم</th>
                                <th>داوری مرحله سوم</th>
                                <th>گواهی</th>
                            </tr>
                            </thead>
                            <tbody class="text-xs">{% for x in level %}{% if x.leveling_index_category_id == 5 %}
                                <tr>
                                    <td>{{ x.title }}</td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.province_score|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge1|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge2|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td><p>{% for y in x.score_set.all %}{% if y.student.id == detail.id %}
                                        {{ y.judge3|floatformat:2 }}{% endif %}{% endfor %}</p></td>
                                    <td>
                                        <a href="{% url 'TopSkill:document_score' detail.id x.id %}">
                                            <button type="button" class="btn btn-info">مدارک</button>
                                        </a>
                                    </td>
                                </tr>{% endif %}{% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="btn-group" role="group" aria-label="Basic example">
        </div>
    </div>
{% endblock content %}
{% block scriptbutton %}
    <script>
        $(document).ready(function () {
            $('#table1, #table2, #table3, #table4, #table5').DataTable({
                "language": {
                    "paginate": {
                        "next": "بعدی",
                        "previous": "قبلی"
                    },
                    lengthMenu: 'نمایش _MENU_ رکورد در صفحه',
                    zeroRecords: 'تعداد رکوردها صفر می باشد.',
                    info: 'صفحه _PAGE_ از _PAGES_',
                    infoEmpty: 'اطلاعاتی برای نمایش وجود ندارد.',
                    infoFiltered: '(از تعداد _MAX_ رکورد)',
                    search: 'جستجو: ',
                    decimal: '.',
                    thousands: ',',
                },
                lengthMenu: [
                    [5, 10, 20, 40, -1],
                    [5, 10, 20, 40, 'همه'],
                ],
                "info": true,
                "paging": true,
                "lengthChange": true,
                "searching": true,
                "ordering": true,
                "autoWidth": true,
                stateSave: true,
            });
        });
    </script>
{% endblock scriptbutton %}